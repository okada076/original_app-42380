<h1>育成記録一覧</h1>

<!-- 🔁 カテゴリー切り替えタブ -->
<div class="filter-tabs">
  <%= link_to "つまずきノート", posts_path(filter: "failure"), class: ("active" if params[:filter] == "failure") %> 
  <% if user_signed_in? %>
    <%= link_to "マイページ", posts_path(filter: "mine"), class: ("active" if params[:filter] == "mine") %>
  <% end %>
  
  <!-- 🔍 タグ検索フォーム -->
  <%= form_with url: posts_path, method: :get, local: true do %>
  <%= label_tag :tag, 'タグで検索' %>
  <%= text_field_tag :tag, params[:tag] %>
  <%= hidden_field_tag :filter, params[:filter] %>
  <%= submit_tag '検索' %>
<% end %>

<!-- 🗂 投稿一覧 or メッセージ -->

<% if @posts.any? %>
  <div class="post-list"> <!-- 💡 追加 -->
    <% @posts.each do |post| %>
      <div class="post-card">
        <% if post.image.attached? %>
          <%= image_tag url_for(post.image), class: "post-image" %>
        <% end %>
        <p class="post-title"><strong>タイトル:</strong> <%= post.title %></p>
        <p class="post-meta"><strong>ユーザー名:</strong> <%= post.user.nickname %></p>

        <span class="category-badge <%= post.category.to_s %>">
         <%= category_label(post.category) %>
        </span>

        <p class="post-meta"><strong>作成日:</strong> <%= post.created_at.strftime("%Y年%m月%d日") %></p>
        <%= link_to '詳細を見る', post_path(post, tag: params[:tag], filter: params[:filter]), class: "post-link" %>
      </div>
    <% end %>
  </div> <!-- 💡 追加 -->
<% else %>
  <p>該当する投稿はありません。</p>
<% end %>













