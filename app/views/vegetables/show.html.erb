<div class="growing-guide" data-controller="step-progress">
  <h2 class="guide-title"><%= @vegetable.name %>の育て方</h2>

  <% if @steps.any? %>
    <ol class="step-list">
      <% @steps.each do |step| %>
        <% progress = @progresses[step.id] %>
        <li class="step-item" id="step_<%= step.id %>">
          <label class="step-label">
            <input type="checkbox"
                   data-step-progress-target="checkbox"
                   data-step-id="<%= step.id %>"
                   <%= "checked" if progress&.checked %>>

            <div class="step-card <%= 'checked-card' if progress&.checked %>">
              <strong>STEP <%= step.step_number %>: <%= step.title %></strong><br>
              <p><%= step.content %></p>
            </div>
          </label>
        </li>
      <% end %>
    </ol>
  <% else %>
    <p>この野菜の育て方手順はまだ登録されていません。</p>
  <% end %>

  <div class="back-link">
    <%= link_to 'ガイド一覧に戻る', vegetables_path, class: "back-link-text" %>
  </div>
</div>